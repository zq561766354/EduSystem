<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <link href="../JS/layui/css/layui.css" rel="stylesheet" />
    <script src="../JS/layui/layui.js"></script>
    <script src="../JS/jquery-3.4.1.min.js"></script>
    <title></title>
</head>
<body>
    <div class="layui-form-item">
        <div class="layui-form-item">
            <form class="layui-form" onsubmit="return false">
                <div class="layui-form-item">
                    <label class="layui-form-label">视频上传:</label>
                    <div class="layui-input-block">
                        <button type="button" class="layui-btn" id="btnUpload">
                            <i class="layui-icon">&#xe67c;</i>上传视频
                        </button>
                    </div>
                </div>
                <div class="layui-form-item">
                    <label class="layui-form-label">视频上传:</label>
                    <div class="layui-input-block">
                        <input id="inputTest" class="layui-input" />
                    </div>
                </div>
            </form>
        </div>
    </div>
    <script>
        layui.use('form', function () {
            var form = layui.form;
            //监听提交
            form.on('submit(formDemo)', function (data) {
                return false;
            });
        });

        layui.use('upload', function () {
            var upload = layui.upload;
            //执行实例
            var uploadInst = upload.render({
                elem: '#btnUpload' //绑定元素
                , accept: 'file'
                , size: 1024 * 20
                , url: '../Ashx/UploadVideoHandler.ashx' //上传接口
                , progress: function (n, elem) {
                    var percent = n + '%' //获取进度百分比
                    element.progress('demo', percent);
                }//可配合 layui 进度条元素使用
                , done: function (res) {
                    _filePath = res.netfilename;
                    layer.msg("上传成功" + res.netfilename);
                    $("#inputTest").val(_filePath);
                }
                , error: function () {
                    layer.msg('上传失败');
                }
            });
        });
    </script>
</body>
</html>